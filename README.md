# Работа с требованиями и стейкхолдерами

## Задание 1. Карта IT-ландшафта и схема интеграции приложений

Полагается что:
- Управление договорами связано с интернет-банком в контексте управления счетами дебетовых карт
- Обслуживание депозитных и кредитных процессов связано с сайтом предоставлением маркетинговой информации
- Детали использования офисных приложений электронной почты и excel опущены

[Карта текущего IT-ландшафта](https://github.com/Boropwnz/architecture-standart/blob/standart/Task1/it_landscape.drawio)

![Карта текущего IT-ландшафта](https://github.com/Boropwnz/architecture-standart/blob/standart/Task1/it_landscape.png)


На схеме интеграции ниже красным отмечены планируемые изменения.

[Схема интеграции приложений](https://github.com/Boropwnz/architecture-standart/blob/standart/Task1/app_integration_scheme.drawio)

![схема интеграции приложений](https://github.com/Boropwnz/architecture-standart/blob/standart/Task1/app_integration_scheme.png)


## Задание 2. FURPS+ таблица

[FURPS+](https://github.com/Boropwnz/architecture-standart/blob/standart/Task2/FURPS+.md)

| Код | Требования                         | Комментарий  |
|-----|------------------------------------|--------------|
| F   | Функциональные (Functionality)     |              |
| F1  | Предоставить общий список ставок и продуктов | Для сайта и кол-центра |
| F2  | Персональный список ставок и продуктов | Для сайта, интернет-банка и кол-центра |
| F3  | Шифрование передачи персональных данных клиента | Для сайта, интернет-банка |
| F4  | Передача данных клиента для заявки на продукт в кол-центр и АБС |              |
| F5  | Возможность открыть продукт в интернет-банке |              |
| F6  | Реализовать свой сервис СМС-информирования |              |
| F7  | Реализовать хранение ставок в АБС | А затем в отдельном микросервисе с расчетом и кешем |
| F8  | Реализовать интернет-банк в виде микросервиса | Снакчала новый функционал, постепенно переносить остальной |
| F9  | Реализовать обновляемый стиль бренда для сайта и интернет-банка |              |
| U   | Удобство использования (Usability) |              |
| U1  | Контент и интерфейс сайта и интернет-банка должны быть максимально просты и понятны для использования людьми старшей возрастной группы |              |
| U2  | Отображать статус заявки на продукт |              |
| U3  | Минимизировать время отклика | Кешировать справочную и другую информацию |
| U4  | Добавить CDS | Для таргетирования клиентов регионов |
| R   | Надёжность (Reliability)           |              |
| R1  | Доступность сайта, интернет-банка и АБС 24/7 99.9% времени |              |
| R2  | Реализовать резервирование для сайта и интернет-банка в разных ЦОД регионов |              |
| P   | Производительность (Performance)   |              |
| P1  | Время отклика сайта и интернет-банка порядка милисекунд |              |
| P2  | Кешировать справочные и другие "медленные" данные |              |
| P3  | Хранить очередь заявок отдельно от АБС |              |
| P4  | Реализовать геошардирование по регионам для контента сайта и интернет-банка |              |
| P5  | Реализовать горизонтальное масштабирование очереди заявок и микросервисов интернет-банка |              |
| S   | Поддерживаемость (Supportability)  |              |
| S1  | Создать документацию | Для разрабатываемых микросервисов интернет-банка |
| S2  | Настроить мониторинг и логирование | Для выявления проблем с производительностью |
| S3  | Продумать систему нагрузочного тестирования |              |
| +R  | + Ограничения (Restrictions)       |              |
| +R1 | Разрабатывать интернет-банк как микросервис | Подключать другой функционал (СМС-сервис, базы данных, систему авторизации, логирование, сайт, АБС) постепенно |
| +R2 | Реализовать единый слой абстракции над базами данных Oracle и MS SQL в приложениях | Не использовать специфику конкретной СУБД, перейти на удобную для горизонтального масштабирования и доступную в регионе |
| +R3 | Использовать Kafka для группы новых микросервисов интернет-банка | Постепенно подключать другие сервисы функционала сайта и АБС |
| +R4 | Передача персональных данных | Потребует проработки системы аудита информационной безопасности |
| +R5 | АБС масштабируется только вертикально | Продумать постепенное подключение функционала АБС к микросервисной архитектуре |
| +R6 | Интернет-банк не работает с АБС напрямую | Организовать очередь заявок |


## Задание 3. Открытие депозитов онлайн

На этапе MVP предполагается, что заявку на открытие депозита обработает менеджер в бэк-офисе.

Можно предположить что:
- Самостоятельная подача заявки на депозитный продукт через интернет-банк эквивалентна обработке заявки с сайта через кол-центр
- Авторизация в интернет-банке эквивалентна идентификации клиента в офисе банка

Будем иметь это в виду при разработке use cases и создании слоев абстракции в логике работы приложений.

### <a name="_b7urdng99y53"></a>**Название задачи: Открытие депозитов онлайн** 
### <a name="_hjk0fkfyohdk"></a>**Автор: Климович С. Л.**
### <a name="_uanumrh8zrui"></a>**Дата: 20.06.2025**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

АБС* - далее будем иметь в виду что заявки нужно хранить вне АБС, в отдельной очереди/журнале/БД.
|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|UC1.1|Пользователь, сайт|Витрина продуктов|1. Пользователь видит общее предложение депозитных продуктов.|
|UC1.2|Пользователь, кол-центр, АБС*|Заявка через кол-центр|1. Пользователь отправляет форму с сайта.<br> 2. Специалист кол-центра звонит клиенту и предлагает персональные продукты.<br> 3. Специалист кол-центра подтверждает заявку.<br> 4. Специалист кол-центра отправляет заявку в АБС*.|
|UC1.3|Пользователь, офис, АБС*|Идентификация|1. Менеджер фронт-офиса идентифицирует пользователя.<br> 2. Менеджер фронт-офиса подтверждает заявку в АБС*.<br> 3. Менеджер бэк-офиса подтверждает заявку в АБС.|
|UC2.1|Пользователь, ИБ, СМС-сервис|Авторизация|1. Пользователь логинится в ИБ.<br> 2. СМС-сервис шлет код подтверждения логина.|
|UC2.2|Пользователь, ИБ|Витрина продуктов|1. Пользователь видит персонализированную витрину депозитных продуктов.|
|UC2.3|Пользователь, ИБ, АБС*, СМС-сервис|Заявка через ИБ|1. Пользователь выбирает продукт.<br> 2. Пользователь подтверждает заявку на продукт.<br> 3. СМС-сервис шлет код подтверждения заявки.<br> 4. Заявка передается в АБС*.<br> 5. Менеджер бэк-офиса подтверждает заявку в АБС.|
|UC3|Пользователь, СМС-сервис|Информирование|1. СМС-сервис шлет информацию о результате операции.|

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

|**№**|**Требование**|
| :-: | :- |
|U1|Обеспечить удобство интерфейса для пользователей старшей возрастной категории|
|U2|Кешировать справочную информацию для улучшения пользовательского опыта|
|U3|Реализовать CDN и геошардирование по регионам |
|R1|Реализовать многофакторную аутентификация в ИБ|
|R2|Реализовать шифрование передаваемых данных|
|R3|Обеспечить обезличивание, сохранность и безопасность персональных данных|
|R4|Обеспечить доступность сайта, интернет-банка и АБС 24/7 99.9% времени|
|P1|Реализовать нагрузочное тестирование ИБ|
|P2|Реализовать обработку и хранение очереди заявок вне АБС|
|P3|Время отклика сайта и интернет-банка порядка милисекунд|
|S1|Документировать создаваемую микросервисную архитектуру и протоколы аудита безопасности|
|+R|Реализовать очередь заявок вне АБС|

### <a name="_qmphm5d6rvi3"></a>**Решение**

[Диаграмма контекста](https://github.com/Boropwnz/architecture-standart/blob/standart/Task3/context.drawio)

![Диаграмма контекста](https://github.com/Boropwnz/architecture-standart/blob/standart/Task3/context.png)

Красным отмечены to-be взаимодействия.

Полагается что имеющийся функционал ИБ и АБС сохраняется, а новые возможности будут добавляться постепенно, с заменой монолитных решений на более гибкие микросервисные. Ничто не мешает использовать старые и новые решения параллельно на период перехода.

Полагается что микросервисная архитектура ИБ будет развиваться постепенно, с последовательной реализацией кеша заявок, брокера сообщений, микросервисов депозитов (а в будующем и кредитов) и переводом монолитной клиент-серверной архитекруты ИБ на микросервисную.

Полагается что АБС будет постепенно делигировать некоторые свои функции (очередь заявок, рассчет персональных ставок) вовне в отдельные микросервисы.

Стоит продумать переход на более годные к горизонтальному масштабированию решения для БД АБС. Например, перейти на .NET и MS SQL.

[Диаграмма контейнеров](https://github.com/Boropwnz/architecture-standart/blob/standart/Task3/container.drawio)

![Диаграмма контейнеров](https://github.com/Boropwnz/architecture-standart/blob/standart/Task3/container.png)

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
1. Одной из альтернатив является переход на единый стек: на Java с привлечением разработчиков АБС к разработке интернет-банка. 
Так же можно перейти на .NET сделав упор на разработчиках интернет-банка.
2. Другая альтернатива реализации калькулятора ставок в АБС - сделать отдельный микросервис.
3. Стоит изучить вопрос законодательства, какие СУБД допустимы к использованию в РФ.
4. Можно рассмотреть вариант разделения баз данных АБС по категориям пользователей или по категориям продуктов (депозиты, кредиты) и масштабировать АБС его разными инстансами БД с разным набором обслуживаемых пользователей (по регионам, продуктам) или разным набором регионов. Шардировать БД АБС по категориям пользователей или по категориям продуктов (один отдел со своей БД занимается депозитами, другой отдел со своей БД занимается кредитами).
5. Прямая интеграция с ИБ АБС приведет к проблемам с производительностью и надежностью.

**Недостатки, ограничения, риски**

1. Нет должной экспертизы сотрудников в вопросе разработки микросервисов.
2. Возможно придется увольнять/менять часть сотрудников, если будет сделан выбор в пользу единого стека .NET/Java.
3. Потребуется время на обучение экспертизе подключения Kafka.
4. Прямая интеграция с ИБ АБС приведет к проблемам с производительностью и надежностью.
5. Нужно изучить вопрос работы с разными СУБД: использовать слой абстракции над конкретными СУБД в приложениях, разработать парсинг данных между разными СУБД.

## Задание 4. Передача ставок в кол-центр


